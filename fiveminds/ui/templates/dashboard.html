{% extends "base.html" %}

{% block title %}Dashboard - Five Minds{% endblock %}

{% block content %}
<div class="dashboard">
    <!-- Welcome Section (shown when idle) -->
    <div id="welcome-section" class="welcome-section">
        <div class="welcome-card card">
            <div class="card-body">
                <div class="welcome-content">
                    <div class="welcome-icon">ğŸ§ </div>
                    <h1 class="welcome-title">Welcome to Five Minds</h1>
                    <p class="welcome-subtitle">Your autonomous AI development assistant</p>
                    <p class="welcome-description">
                        Simply describe what you want to accomplish and Five Minds will handle everything 
                        autonomously - from planning to implementation to testing.
                    </p>
                    <div class="welcome-features">
                        <div class="feature-item">
                            <span class="feature-icon">ğŸ¯</span>
                            <span>Define your objective</span>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">ğŸ¤–</span>
                            <span>FM works autonomously</span>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">âœ…</span>
                            <span>Get results with commits</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Header Section -->
    <div class="dashboard-header">
        <div class="objective-card card">
            <div class="card-header">
                <h2><span class="icon">ğŸ¯</span> Objective</h2>
                <div id="objective-controls" class="objective-controls">
                    <button id="stop-btn" class="btn btn-danger btn-small" style="display: none;">
                        â¹ Stop
                    </button>
                </div>
            </div>
            <div class="card-body">
                <p id="objective-description" class="objective-text">No objective set</p>
                <div class="objective-meta">
                    <span id="objective-requirements" class="meta-item">0 requirements</span>
                    <span id="objective-constraints" class="meta-item">0 constraints</span>
                </div>
            </div>
        </div>

        <div class="status-card card">
            <div class="card-header">
                <h2><span class="icon">ğŸ“ˆ</span> Status</h2>
            </div>
            <div class="card-body">
                <div class="status-badge-container">
                    <span id="system-status-badge" class="status-badge idle">Idle</span>
                </div>
                <div class="status-details">
                    <div class="detail-row">
                        <span class="label">Started:</span>
                        <span id="start-time" class="value">-</span>
                    </div>
                    <div class="detail-row">
                        <span class="label">Elapsed:</span>
                        <span id="elapsed-time" class="value">-</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Final Summary Section (shown when completed) -->
    <div id="final-summary-section" class="final-summary-section" style="display: none;">
        <div class="card final-summary-card">
            <div class="card-header">
                <h2><span class="icon">ğŸ“‹</span> Final Summary</h2>
            </div>
            <div class="card-body">
                <pre id="final-summary-content" class="final-summary-content"></pre>
            </div>
        </div>
    </div>

    <!-- Progress Timeline -->
    <div class="progress-section card">
        <div class="card-header">
            <h2><span class="icon">â±ï¸</span> Progress Timeline</h2>
            <span id="progress-count" class="badge">0 events</span>
        </div>
        <div class="card-body">
            <div id="progress-timeline" class="timeline">
                <div class="timeline-empty">No progress events yet</div>
            </div>
        </div>
    </div>

    <!-- Metrics Row -->
    <div class="metrics-row">
        <div class="metric-card card">
            <div class="card-header">
                <h3><span class="icon">ğŸ’°</span> Cost Usage</h3>
            </div>
            <div class="card-body">
                <div class="metric-grid">
                    <div class="metric-item">
                        <span class="metric-value" id="tokens-used">0</span>
                        <span class="metric-label">Tokens</span>
                    </div>
                    <div class="metric-item">
                        <span class="metric-value" id="api-calls">0</span>
                        <span class="metric-label">API Calls</span>
                    </div>
                    <div class="metric-item">
                        <span class="metric-value" id="estimated-cost">$0.00</span>
                        <span class="metric-label">Est. Cost</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="metric-card card">
            <div class="card-header">
                <h3><span class="icon">ğŸƒ</span> Active Jobs</h3>
            </div>
            <div class="card-body">
                <div id="active-jobs-list" class="jobs-list">
                    <div class="jobs-empty">No active jobs</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Tickets Overview -->
    <div class="tickets-section card">
        <div class="card-header">
            <h2><span class="icon">ğŸ«</span> Tickets Overview</h2>
            <div class="ticket-stats">
                <span class="stat completed" id="tickets-completed">0 completed</span>
                <span class="stat pending" id="tickets-pending">0 pending</span>
                <span class="stat failed" id="tickets-failed">0 failed</span>
            </div>
        </div>
        <div class="card-body">
            <div id="tickets-grid" class="tickets-grid">
                <div class="tickets-empty">No tickets created yet</div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
{% endblock %}
