{% extends "base.html" %}

{% block title %}Settings - Five Minds{% endblock %}

{% block content %}
<div class="settings-page">
    <!-- Header -->
    <div class="settings-header">
        <h1><span class="icon">‚öôÔ∏è</span> Settings</h1>
        <p class="settings-subtitle">Configure API keys and AI model parameters</p>
    </div>

    <!-- API Keys Section -->
    <div class="settings-section card">
        <div class="card-header">
            <h2><span class="icon">üîë</span> API Keys</h2>
        </div>
        <div class="card-body">
            <form id="api-keys-form" class="settings-form">
                <!-- OpenAI -->
                <div class="form-group">
                    <label for="openai-key">
                        <span class="provider-icon">ü§ñ</span> OpenAI API Key
                    </label>
                    <div class="input-group">
                        <input type="password" id="openai-key" name="openai_key" 
                               placeholder="sk-..." autocomplete="off">
                        <button type="button" class="btn btn-small toggle-visibility" data-target="openai-key">
                            üëÅÔ∏è
                        </button>
                    </div>
                    <span class="form-hint">Used for GPT-4, GPT-3.5-turbo models</span>
                </div>

                <!-- Anthropic -->
                <div class="form-group">
                    <label for="anthropic-key">
                        <span class="provider-icon">üß†</span> Anthropic API Key
                    </label>
                    <div class="input-group">
                        <input type="password" id="anthropic-key" name="anthropic_key" 
                               placeholder="sk-ant-..." autocomplete="off">
                        <button type="button" class="btn btn-small toggle-visibility" data-target="anthropic-key">
                            üëÅÔ∏è
                        </button>
                    </div>
                    <span class="form-hint">Used for Claude models</span>
                </div>

                <!-- Google -->
                <div class="form-group">
                    <label for="google-key">
                        <span class="provider-icon">üî∑</span> Google AI API Key
                    </label>
                    <div class="input-group">
                        <input type="password" id="google-key" name="google_key" 
                               placeholder="AIza..." autocomplete="off">
                        <button type="button" class="btn btn-small toggle-visibility" data-target="google-key">
                            üëÅÔ∏è
                        </button>
                    </div>
                    <span class="form-hint">Used for Gemini models</span>
                </div>

                <!-- Cohere -->
                <div class="form-group">
                    <label for="cohere-key">
                        <span class="provider-icon">üí´</span> Cohere API Key
                    </label>
                    <div class="input-group">
                        <input type="password" id="cohere-key" name="cohere_key" 
                               placeholder="..." autocomplete="off">
                        <button type="button" class="btn btn-small toggle-visibility" data-target="cohere-key">
                            üëÅÔ∏è
                        </button>
                    </div>
                    <span class="form-hint">Used for Command models</span>
                </div>

                <!-- Custom/Local -->
                <div class="form-group">
                    <label for="custom-endpoint">
                        <span class="provider-icon">üîß</span> Custom API Endpoint
                    </label>
                    <div class="input-group">
                        <input type="text" id="custom-endpoint" name="custom_endpoint" 
                               placeholder="http://localhost:11434/api">
                    </div>
                    <span class="form-hint">For local models (Ollama, LM Studio, etc.)</span>
                </div>
            </form>
        </div>
    </div>

    <!-- Model Configuration Section -->
    <div class="settings-section card">
        <div class="card-header">
            <h2><span class="icon">üéõÔ∏è</span> Model Configuration</h2>
        </div>
        <div class="card-body">
            <form id="model-config-form" class="settings-form">
                <!-- HeadMaster Model -->
                <div class="form-group">
                    <label for="headmaster-model">HeadMaster Model</label>
                    <select id="headmaster-model" name="headmaster_model">
                        <option value="gpt-4">GPT-4 (OpenAI)</option>
                        <option value="gpt-4-turbo">GPT-4 Turbo (OpenAI)</option>
                        <option value="gpt-3.5-turbo">GPT-3.5 Turbo (OpenAI)</option>
                        <option value="claude-3-opus">Claude 3 Opus (Anthropic)</option>
                        <option value="claude-3-sonnet">Claude 3 Sonnet (Anthropic)</option>
                        <option value="gemini-pro">Gemini Pro (Google)</option>
                        <option value="custom">Custom/Local</option>
                    </select>
                    <span class="form-hint">Model used for objective analysis and ticket creation</span>
                </div>

                <!-- Runner Model -->
                <div class="form-group">
                    <label for="runner-model">Runner Model</label>
                    <select id="runner-model" name="runner_model">
                        <option value="gpt-4">GPT-4 (OpenAI)</option>
                        <option value="gpt-4-turbo">GPT-4 Turbo (OpenAI)</option>
                        <option value="gpt-3.5-turbo">GPT-3.5 Turbo (OpenAI)</option>
                        <option value="claude-3-opus">Claude 3 Opus (Anthropic)</option>
                        <option value="claude-3-sonnet">Claude 3 Sonnet (Anthropic)</option>
                        <option value="gemini-pro">Gemini Pro (Google)</option>
                        <option value="custom">Custom/Local</option>
                    </select>
                    <span class="form-hint">Model used for code implementation</span>
                </div>

                <!-- Reviewer Model -->
                <div class="form-group">
                    <label for="reviewer-model">Reviewer Model</label>
                    <select id="reviewer-model" name="reviewer_model">
                        <option value="gpt-4">GPT-4 (OpenAI)</option>
                        <option value="gpt-4-turbo">GPT-4 Turbo (OpenAI)</option>
                        <option value="gpt-3.5-turbo">GPT-3.5 Turbo (OpenAI)</option>
                        <option value="claude-3-opus">Claude 3 Opus (Anthropic)</option>
                        <option value="claude-3-sonnet">Claude 3 Sonnet (Anthropic)</option>
                        <option value="gemini-pro">Gemini Pro (Google)</option>
                        <option value="custom">Custom/Local</option>
                    </select>
                    <span class="form-hint">Model used for code review</span>
                </div>

                <!-- Temperature -->
                <div class="form-group">
                    <label for="temperature">Temperature</label>
                    <div class="range-group">
                        <input type="range" id="temperature" name="temperature" 
                               min="0" max="1" step="0.1" value="0.7">
                        <span id="temperature-value" class="range-value">0.7</span>
                    </div>
                    <span class="form-hint">Higher values make output more creative, lower values more focused</span>
                </div>

                <!-- Max Tokens -->
                <div class="form-group">
                    <label for="max-tokens">Max Tokens</label>
                    <input type="number" id="max-tokens" name="max_tokens" 
                           value="4096" min="100" max="32000">
                    <span class="form-hint">Maximum number of tokens per response</span>
                </div>
            </form>
        </div>
    </div>

    <!-- Actions -->
    <div class="settings-actions">
        <button type="button" id="save-settings" class="btn btn-primary">
            üíæ Save Settings
        </button>
        <button type="button" id="reset-settings" class="btn btn-secondary">
            üîÑ Reset to Defaults
        </button>
        <span id="settings-status" class="settings-status"></span>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/settings.js') }}"></script>
{% endblock %}
